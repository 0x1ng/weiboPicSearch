$(function() {
    var i = i || [];
    i.push(["_setAccount", "1264326742"]);
    var t = function(i) {
        i += "";
        for (var t = "0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ",
        a = t.length,
        s = i.length,
        n = 0,
        r = 0; s > n;) r += Math.pow(a, n++) * t.indexOf(i.charAt(s - n) || 0);
        return r
    },
    a = function(i) {
        var a = i.lastIndexOf("/"),
        s = i.substr(a + 1, 8);
        return s.startsWith("00") ? t(s) : parseInt(s, 16)
    };
    $("#form-vld").validator({
        onValid: function(i) {
            $(i.field).closest(".am-form-group").find(".am-alert").hide()
        },
        onInValid: function(i) {
            var t = $(i.field),
            a = t.closest(".am-form-group"),
            s = a.find(".am-alert"),
            n = t.data("validationMessage") || this.getValidationMessage(i);
            s.length || (s = $('<div class="am-alert am-alert-danger"></div>').hide().appendTo(a)),
            s.html(n).show()
        },
        submit: function(t) {
            t.preventDefault(),
            i.push(["_trackEvent", "imgsrc", "click", $("#imgsrc").val()]),
            this.isFormValid() && ($("#imgsrc").attr("disabled", !0), $("#submit").button("loading"), setTimeout(function() {
                var i = $("#imgsrc").val(),
                t = a(i);
                if (t) {
                    var s = "https://weibo.com/u/" + t;
                    $("#form-vld").slideUp(),
                    $(".img-main").slideDown(),
                    $("#img-link-src").val(s),
                    $("#img-link-btn").prop("href", s),
                    $("#img-show").html('<a href="' + i + '" target="_blank"><img src="' + i + '" class="am-img-thumbnail am-img-responsive am-center am-radius" alt="img"></a>')
                } else $("#imgsrc").closest(".am-form-group").find(".am-alert").html("\u627e\u4e0d\u5230 Po \u4e3b\uff0c\u8bf7\u68c0\u67e5\u56fe\u7247\u5730\u5740\u662f\u5426\u6b63\u786e").show();
                $("#imgsrc").attr("disabled", !1),
                $("#submit").button("reset")
            },
            500))
        }
    }),
    $(".img-main input").focus(function() {
        i.push(["_trackEvent", "imgsrc", "focus", $(this).val()]),
        $(this).select()
    }),
    $("#backnow").on("click",
    function() {
        i.push(["_trackEvent", "imgsrc", "back", $("#imgsrc").val()]),
        $("#form-vld").slideDown(),
        $(".img-main").slideUp(),
        $(".img-main input").val(""),
        $("#img-show").html("")
    })
    
});